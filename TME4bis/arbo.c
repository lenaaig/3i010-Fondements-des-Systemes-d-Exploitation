#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>


int main(int argc, char * argv[]){
	int i,j;
	if(argc<1){
		printf("Il faut mettre un niveau d'arborescence\n");
		exit(1);
	}
	printf("%d\n",getpid());
	for (i=0; i<atoi(argv[1]); i++){
		if (fork()>0){	//Creation du 1er fils
			if(fork()>0){//Creation du 2eme fils
				printf("je suis le pere %d \n",i);
				sleep(30);
				exit(1);
			}
		}
	}
	printf("je suis l'un des derniers fils\n");
	sleep(30);
	printf("the end\n");
	return 0;
}
