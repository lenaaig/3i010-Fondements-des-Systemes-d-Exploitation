#include <stdio.h>
#include <stdlib.h>
#include <sys/time.h>
#include <sys/resource.h>
#include <unistd.h>
#include "tab.h"

void PrintMem (){
	struct rusage usage;
	getrusage(RUSAGE_SELF, &usage);
	printf("Memoire residente occupée par le programme: %ld \n",usage.ru_maxrss);

}

int main (int argc, char *argv[]){
	//Allocation memoire
	int *tab= (int*)malloc(sizeof(int)*NMAX);

	PrintMem();
	InitTab( tab, NMAX);
	PrintMem();

	//Affichage
	//PrintTab( tab, NMAX);

	int min;
	int somme1 = SumTab (tab, NMAX); 
	int somme2 = MinSumTab ( &min,tab, NMAX); 
	printf(" somme1 = %d somme2 = %d \n",somme1,somme2);
	printf(" min= %d \n",min);

	free(tab);
	return 0;
}

/* Resultat avec PrintMem:
Memoire residente occupée par le programme: 1784 AVANT initialisation
Memoire residente occupée par le programme: 5120 APRES initialisation
*/

